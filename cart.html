<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Carrito de Compras | Tienda y Hogar</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <header>
    <h1>Carrito de Compras</h1>
    <a href="index.html">‚Üê Seguir comprando</a>
  </header>

  <main>
    <section id="cart-container">
      <table id="cart-table">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Precio</th>
            <th>Cantidad</th>
            <th>Subtotal</th>
            <th>Eliminar</th>
          </tr>
        </thead>
        <tbody id="cart-body">
          <!-- Aqu√≠ se agregan los productos -->
        </tbody>
      </table>

      <div id="total-container">
        <h3>Total: $<span id="cart-total">0.00</span></h3>
        <button id="send-whatsapp">Continuar por WhatsApp</button>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Tienda y Hogar</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      const cartBody = document.getElementById('cart-body');
      const cartTotal = document.getElementById('cart-total');

      function renderCart() {
        cartBody.innerHTML = '';
        let total = 0;

        cart.forEach((item, index) => {
          const subtotal = item.precio * item.cantidad;
          total += subtotal;

          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${item.nombre}</td>
            <td>$${item.precio.toFixed(2)}</td>
            <td>
              <input type="number" min="1" value="${item.cantidad}" data-index="${index}" class="quantity-input"/>
            </td>
            <td>$${subtotal.toFixed(2)}</td>
            <td><button class="delete-btn" data-index="${index}">üóëÔ∏è</button></td>
          `;
          cartBody.appendChild(row);
        });

        cartTotal.textContent = total.toFixed(2);
      }

      // Actualizar cantidad
      cartBody.addEventListener('change', function (e) {
        if (e.target.classList.contains('quantity-input')) {
          const index = e.target.getAttribute('data-index');
          const nuevaCantidad = parseInt(e.target.value);
          if (nuevaCantidad >= 1) {
            cart[index].cantidad = nuevaCantidad;
            localStorage.setItem('cart', JSON.stringify(cart));
            renderCart();
          }
        }
      });

      // Eliminar producto
      cartBody.addEventListener('click', function (e) {
        if (e.target.classList.contains('delete-btn')) {
          const index = e.target.getAttribute('data-index');
          cart.splice(index, 1);
          localStorage.setItem('cart', JSON.stringify(cart));
          renderCart();
        }
      });

      // Enviar pedido por WhatsApp
      document.getElementById('send-whatsapp').addEventListener('click', function () {
        if (cart.length === 0) {
          alert('El carrito est√° vac√≠o.');
          return;
        }

        let mensaje = '¬°Hola! Me gustar√≠a hacer el siguiente pedido:%0A';
        cart.forEach(item => {
          mensaje += `üõí ${item.nombre} x${item.cantidad} - $${(item.precio * item.cantidad).toFixed(2)}%0A`;
        });
        mensaje += `üî¢ Total: $${cart.reduce((t, i) => t + i.precio * i.cantidad, 0).toFixed(2)}%0A`;
        mensaje += 'Gracias.';

        const numero = '5351234567'; // Reemplaza con tu n√∫mero real
        const url = `https://wa.me/${numero}?text=${mensaje}`;
        window.open(url, '_blank');
      });

      renderCart();
    });
  </script>

</body>
</html>